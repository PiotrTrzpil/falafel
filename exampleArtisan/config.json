{
    "name": "1daae15d-faa6-4dcc-a797-0aea00edf1c2_pw_trigger",
    "version": "1.0",
    "title": "PW Trigger",
    "description": "",
    "icon": {
        "type": "url",
        "value": "//s3.amazonaws.com/images.tray.io/static/service/icons/prosper-works.png"
    },
    "trigger": true,
    "tags": [],
    "schema": {
        "type": "object",
        "$schema": "http://json-schema.org/draft-04/schema#",
        "advanced": [
            "api_key",
            "admin_email_address"
        ],
        "required": [
            "api_key",
            "admin_email_address"
        ],
        "properties": {
            "api_key": {
                "type": "string",
                "title": "API Key",
                "description": "Your unique ProsperWorks API key.",
                "default_jsonpath": "$.auth.api_key"
            },
            "admin_email_address": {
                "type": "string",
                "title": "Admin Email Address",
                "description": "The email address of the admin that this API key belongs to.",
                "default_jsonpath": "$.auth.admin_email_address"
            }
        },
        "additionalProperties": false
    },
    "model": {
        "type": "object",
        "value": {
            "auth": {
                "type": "object",
                "value": {
                    "type": {
                        "type": "string",
                        "value": "header"
                    },
                    "headers": {
                        "type": "array",
                        "value": [
                            {
                                "type": "object",
                                "value": {
                                    "name": {
                                        "type": "string",
                                        "value": "X-PW-AccessToken"
                                    },
                                    "value": {
                                        "type": "string",
                                        "value": "{{{api_key}}}"
                                    }
                                }
                            },
                            {
                                "type": "object",
                                "value": {
                                    "name": {
                                        "type": "string",
                                        "value": "X-PW-Application"
                                    },
                                    "value": {
                                        "type": "string",
                                        "value": "developer_api"
                                    }
                                }
                            },
                            {
                                "type": "object",
                                "value": {
                                    "name": {
                                        "type": "string",
                                        "value": "X-PW-UserEmail"
                                    },
                                    "value": {
                                        "type": "string",
                                        "value": "{{admin_email_address}}"
                                    }
                                }
                            },
                            {
                                "type": "object",
                                "value": {
                                    "name": {
                                        "type": "string",
                                        "value": "Content-Type"
                                    },
                                    "value": {
                                        "type": "string",
                                        "value": "application/json"
                                    }
                                }
                            }
                        ]
                    }
                }
            },
            "data": {
                "type": "array",
                "value": {}
            },
            "query": {
                "type": "array",
                "value": []
            },
            "before": {
                "type": "function"
            },
            "baseUrl": {
                "type": "string",
                "value": "https://api.prosperworks.com/developer_api/v1"
            },
            "expects": {
                "type": "string",
                "value": "2xx"
            },
            "headers": {
                "type": "array",
                "value": []
            },
            "notExpects": {
                "type": "string"
            },
            "afterFailure": {
                "type": "function"
            },
            "afterSuccess": {
                "type": "function"
            }
        }
    },
    "operations": [
        {
            "name": "on_webhook",
            "version": 1,
            "title": "On Webhook",
            "description": "",
            "type": "public",
            "isDefault": false,
            "timeout": 15000,
            "isDynamicOutput": false,
            "branches": {},
            "branchTemplate": "none",
            "inputSchema": {
                "type": "object",
                "properties": {
                    "public_url": {
                        "type": "string",
                        "default_jsonpath": "$.env.public_url",
                        "title": "Public URL",
                        "description": "The unique URL of the Tray workflow, where webhook sent to from ProsperWorks."
                    }
                },
                "$schema": "http://json-schema.org/draft-04/schema#",
                "required": [
                    "public_url"
                ],
                "advanced": [
                    "public_url"
                ],
                "additionalProperties": false
            },
            "outputSchema": {
                "type": "object",
                "properties": {},
                "$schema": "http://json-schema.org/draft-04/schema#",
                "required": [],
                "advanced": [],
                "additionalProperties": false
            },
            "replySchema": {},
            "model": {
                "type": "object",
                "value": {
                    "url": {
                        "type": "string",
                        "value": "/webhooks"
                    },
                    "data": {
                        "type": "object",
                        "value": {
                            "type": {
                                "type": "string",
                                "value": "person",
                                "metadata": {}
                            },
                            "event": {
                                "type": "string",
                                "value": "update",
                                "metadata": {}
                            },
                            "target": {
                                "type": "string",
                                "value": "{{{public_url}}}",
                                "metadata": {}
                            }
                        }
                    },
                    "query": {
                        "type": "array",
                        "value": []
                    },
                    "before": {
                        "type": "function"
                    },
                    "method": {
                        "type": "string",
                        "value": "post"
                    },
                    "expects": {
                        "type": "string"
                    },
                    "headers": {
                        "type": "array",
                        "value": []
                    },
                    "notExpects": {
                        "type": "string"
                    },
                    "afterFailure": {
                        "type": "function"
                    },
                    "afterSuccess": {
                        "type": "function"
                    }
                }
            },
            "subOperations": {
                "destroy": {
                    "model": {
                        "type": "object",
                        "value": {
                            "method": {
                                "type": "string",
                                "value": "get"
                            },
                            "headers": {
                                "type": "array",
                                "value": []
                            },
                            "notExpects": {
                                "type": "string"
                            },
                            "afterSuccess": {
                                "type": "function"
                            },
                            "query": {
                                "type": "array",
                                "value": []
                            },
                            "data": {
                                "type": "object",
                                "value": {}
                            },
                            "afterFailure": {
                                "type": "function"
                            },
                            "url": {
                                "type": "string",
                                "value": "/webhooks"
                            },
                            "expects": {
                                "type": "string"
                            },
                            "before": {
                                "type": "function"
                            }
                        }
                    }
                },
                "request": {
                    "model": {
                        "type": "object",
                        "value": {
                            "filter": {
                                "type": "function"
                            },
                            "before": {
                                "type": "function"
                            },
                            "reply": {
                                "type": "function"
                            }
                        }
                    }
                },
                "response": {
                    "model": {
                        "type": "object",
                        "value": {
                            "method": {
                                "type": "string",
                                "value": "get"
                            },
                            "headers": {
                                "type": "array",
                                "value": []
                            },
                            "notExpects": {
                                "type": "string"
                            },
                            "afterSuccess": {
                                "type": "function"
                            },
                            "query": {
                                "type": "array",
                                "value": []
                            },
                            "data": {
                                "type": "object",
                                "value": {}
                            },
                            "afterFailure": {
                                "type": "function"
                            },
                            "url": {
                                "type": "string",
                                "value": "/"
                            },
                            "expects": {
                                "type": "string"
                            },
                            "before": {
                                "type": "function"
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "list_webhooks",
            "version": 1,
            "title": "List webhooks",
            "description": "",
            "type": "private",
            "isDefault": false,
            "timeout": 15000,
            "isDynamicOutput": false,
            "branches": {},
            "branchTemplate": "none",
            "inputSchema": {
                "type": "object",
                "properties": {},
                "$schema": "http://json-schema.org/draft-04/schema#",
                "required": [],
                "advanced": [],
                "additionalProperties": false
            },
            "outputSchema": {
                "type": "object",
                "properties": {},
                "$schema": "http://json-schema.org/draft-04/schema#",
                "required": [],
                "advanced": [],
                "additionalProperties": false
            },
            "replySchema": {},
            "model": {
                "type": "object",
                "value": {
                    "url": {
                        "type": "string",
                        "value": "/webhooks"
                    },
                    "data": {
                        "type": "object",
                        "value": {}
                    },
                    "query": {
                        "type": "array",
                        "value": []
                    },
                    "before": {
                        "type": "function"
                    },
                    "method": {
                        "type": "string",
                        "value": "get"
                    },
                    "expects": {
                        "type": "string"
                    },
                    "headers": {
                        "type": "array",
                        "value": []
                    },
                    "notExpects": {
                        "type": "string"
                    },
                    "afterFailure": {
                        "type": "function"
                    },
                    "afterSuccess": {
                        "type": "function"
                    }
                }
            },
            "subOperations": {
                "destroy": {
                    "model": {
                        "type": "object",
                        "value": {
                            "method": {
                                "type": "string",
                                "value": "get"
                            },
                            "url": {
                                "type": "string",
                                "value": "/"
                            },
                            "query": {
                                "type": "array",
                                "value": []
                            },
                            "data": {
                                "type": "object",
                                "value": {}
                            },
                            "headers": {
                                "type": "array",
                                "value": []
                            },
                            "expects": {
                                "type": "string"
                            },
                            "notExpects": {
                                "type": "string"
                            },
                            "afterSuccess": {
                                "type": "function"
                            },
                            "afterFailure": {
                                "type": "function"
                            },
                            "before": {
                                "type": "function"
                            }
                        }
                    }
                },
                "request": {
                    "model": {
                        "type": "object",
                        "value": {
                            "method": {
                                "type": "string",
                                "value": "get"
                            },
                            "url": {
                                "type": "string",
                                "value": "/"
                            },
                            "query": {
                                "type": "array",
                                "value": []
                            },
                            "data": {
                                "type": "object",
                                "value": {}
                            },
                            "headers": {
                                "type": "array",
                                "value": []
                            },
                            "expects": {
                                "type": "string"
                            },
                            "notExpects": {
                                "type": "string"
                            },
                            "afterSuccess": {
                                "type": "function"
                            },
                            "afterFailure": {
                                "type": "function"
                            },
                            "before": {
                                "type": "function"
                            }
                        }
                    }
                },
                "response": {
                    "model": {
                        "type": "object",
                        "value": {
                            "method": {
                                "type": "string",
                                "value": "get"
                            },
                            "url": {
                                "type": "string",
                                "value": "/"
                            },
                            "query": {
                                "type": "array",
                                "value": []
                            },
                            "data": {
                                "type": "object",
                                "value": {}
                            },
                            "headers": {
                                "type": "array",
                                "value": []
                            },
                            "expects": {
                                "type": "string"
                            },
                            "notExpects": {
                                "type": "string"
                            },
                            "afterSuccess": {
                                "type": "function"
                            },
                            "afterFailure": {
                                "type": "function"
                            },
                            "before": {
                                "type": "function"
                            }
                        }
                    }
                }
            }
        }
    ]
}